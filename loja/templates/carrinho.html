{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Carrinho - MoveStore</title>

    <style>
        body { font-family: Arial, sans-serif; margin:0; padding:0; }

        /* HEADER (igual produtos) */
        header {
            background:#111;
            color:white;
            padding:20px 40px;
            display:flex;
            justify-content:space-between;
            align-items:center;
        }
        header a {
            color:white;
            text-decoration:none;
            margin-left:20px;
        }

        /* BANNER PEQUENO (igual produtos: 200px) */
        .banner {
            position:relative;
            width:100%;
            height:200px;
            margin-bottom:40px;
        }
        .banner img {
            width:100%;
            height:100%;
            object-fit:cover;
        }
        .banner-text {
            position:absolute;
            top:50%;
            left:50%;
            transform:translate(-50%, -50%);
            text-align:center;
            color:white;
        }
        .banner-text h1 {
            font-size:36px;
            margin-bottom:10px;
        }
        .banner-text a {
            padding:8px 16px;
            background:#28a745;
            color:white;
            text-decoration:none;
            border-radius:5px;
        }
        .banner-text a:hover {
            background:#218838;
        }

        /* CONTAINER */
        .carrinho-container {
            max-width:1000px;
            margin:0 auto 50px;
            padding:0 20px;
        }

        .carrinho-title {
            text-align:center;
            font-size:32px;
            margin-bottom:30px;
        }

        /* TABELA ESTILO LIMPO */
        .carrinho-box {
            background:white;
            padding:20px;
            border-radius:10px;
            box-shadow:0 2px 5px rgba(0,0,0,0.1);
        }

        table {
            width:100%;
            border-collapse:collapse;
        }
        table th {
            background:#f5f5f5;
            padding:12px;
            text-align:center;
            font-size:16px;
        }
        table td {
            padding:14px;
            text-align:center;
            border-bottom:1px solid #eee;
        }

        table img {
            width:80px;
            height:80px;
            object-fit:cover;
            border-radius:6px;
        }

        /* BOTÕES */
        .btn-remover {
            background:#ff4d4d;
            color:white;
            padding:7px 12px;
            border-radius:5px;
            text-decoration:none;
            font-weight:bold;
        }
        .btn-remover:hover {
            background:#c20000;
        }

        .btn-finalizar {
            background:#28a745;
            color:white;
            padding:12px 22px;
            border-radius:5px;
            text-decoration:none;
            font-size:17px;
            font-weight:bold;
            display:inline-block;
            margin-top:15px;
        }
        .btn-finalizar:hover {
            background:#218838;
        }

        .total-geral {
            text-align:right;
            margin:20px 0;
            font-size:20px;
            font-weight:bold;
        }
    </style>
</head>

<body>

    <!-- HEADER -->
    <header>
        <h1>MoveStore</h1>
        <nav>
            <a href="{% url 'home' %}">Home</a>
            <a href="{% url 'produtos' %}">Produtos</a>
            <a href="{% url 'sobre' %}">Sobre</a>
            <a href="{% url 'contato' %}">Contato</a>
            <a href="{% url 'carrinho' %}">Carrinho</a>
        </nav>
    </header>

    <!-- BANNER pequeno (exatamente como produtos) -->
    <section class="banner">
        <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=1200&q=80">
        <div class="banner-text">
            <h1>Meu Carrinho</h1>
            <a href="{% url 'home' %}">Voltar à Home</a>
        </div>
    </section>

    <!-- CONTEÚDO -->
    <div class="carrinho-container">

        <h2 class="carrinho-title">Produtos no Carrinho</h2>

        {% if carrinho %}
        <div class="carrinho-box">

            <table>
                <thead>
                    <tr>
                        <th>Produto</th>
                        <th>Imagem</th>
                        <th>Preço</th>
                        <th>Qtd</th>
                        <th>Total</th>
                        <th>Ação</th>
                    </tr>
                </thead>

                <tbody>
                    {% for item in carrinho %}
                    <tr>
                        <td>{{ item.nome }}</td>
                        <td><img src="{{ item.imagem }}" alt="{{ item.nome }}"></td>
                        <td>R$ {{ item.preco }}</td>
                        <td>{{ item.quantidade }}</td>
                        <td>R$ {{ item.total }}</td>
                        <td>
                            <a href="{% url 'remover_do_carrinho' item.id %}" class="btn-remover">Remover</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <p class="total-geral">Total Geral: R$ {{ total_geral }}</p>

            <div style="text-align:right;">
                <a href="{% url 'finalizar_compra' %}" class="btn-finalizar">Finalizar Compra</a>
            </div>

        </div>

        {% else %}
        <p style="text-align:center; font-size:18px; color:#555;">
            Seu carrinho está vazio.
        </p>
        {% endif %}
    </div>

</body>
</html>
